<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body>
    <div class="container">
        <div class="dashboard">
            <div class="dashboard-header">
                <div>
                    <h1>üë®‚Äçüéì –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç —Å—Ç—É–¥–µ–Ω—Ç–∞</h1>
                </div>
                <div class="user-info">
                    <p><strong id="userName"></strong></p>
                    <p id="userEmail"></p>
                    <p>–ì—Ä—É–ø–ø–∞: <span id="groupName"></span></p>
                    <p>–ö—É—Ä—Å: <span id="courseName"></span></p>
                    <button onclick="handleLogout()" class="btn btn-secondary">–í—ã–π—Ç–∏</button>
                </div>
            </div>

            <!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div class="stats" id="stats">
                <div class="stat-card">
                    <h3 id="testsAvailable">0</h3>
                    <p>–î–æ—Å—Ç—É–ø–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤</p>
                </div>
                <div class="stat-card">
                    <h3 id="testsCompleted">0</h3>
                    <p>–¢–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ</p>
                </div>
                <div class="stat-card">
                    <h3 id="averageScore">0%</h3>
                    <p>–°—Ä–µ–¥–Ω–∏–π –±–∞–ª–ª</p>
                </div>
            </div>

            <!-- –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã -->
            <div class="section">
                <h2>üìù –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–µ—Å—Ç—ã</h2>
                <div id="availableTestsList" class="grid">
                    <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤...</p>
                </div>
            </div>

            <!-- –ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            <div class="section">
                <h2>üìä –ú–æ–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
                <div id="resultsList">
                    <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Å—Ç–∞ -->
    <div id="testModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="testModalTitle">–¢–µ—Å—Ç</h2>
                <div id="timerDisplay" class="badge badge-info" style="font-size: 18px; padding: 10px 20px;"></div>
            </div>
            <div id="testContent">
                <p class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –≤–æ–ø—Ä–æ—Å–æ–≤...</p>
            </div>
            <button id="submitTestBtn" onclick="submitTest()" class="btn btn-primary"
                style="display: none; margin-top: 20px;">–ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç–µ—Å—Ç</button>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ -->
    <div id="resultModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞</h2>
                <button class="close-btn" onclick="closeModal('resultModal')">&times;</button>
            </div>
            <div id="resultContent"></div>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';
        import { getAuth } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js';
        import { getFirestore } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyDLTetipjEMhn5FK0CvePE0NKvFNPOm7m8",
            authDomain: "ex-test-back.firebaseapp.com",
            projectId: "ex-test-back",
            storageBucket: "ex-test-back.firebasestorage.app",
            messagingSenderId: "209371697034",
            appId: "1:209371697034:web:492a36d6f63326fa8f8273",
            measurementId: "G-V1RLP62KJK"
        };

        const app = initializeApp(firebaseConfig);
        window.auth = getAuth(app);
        window.db = getFirestore(app);
    </script>

    <script type="module" src="student.js"></script>
</body>

</html>